<?xml version="1.0" encoding="ISO-8859-1" ?>
<project name="test" default="test-xml">

<!--
<property name="test.path.reports" value="./reports" />
-->

<path id="classpath">
 	<fileset dir="lib" includes="junit-4.3.1.jar"/>
</path>

<path id="classpathTest">
 	<fileset dir="jars" includes="test.jar"/>
</path>

<target name="clear" description="Borra para un recompilacion completa">
	<echo>Borrando birectorios: ..................... </echo>
    <mkdir dir="src_gen" />
    <mkdir dir="jars" />
</target>

<target name="makedir" description="Crea los directorios">
	<echo>ferificando y creando directorios: ..................... </echo>
    <mkdir dir="src_gen" />
    <mkdir dir="jars" />
	<mkdir dir="lib" />
	<mkdir dir="report" />
	<mkdir dir="html" />
</target>

<target name="make" depends="makedir" description="Compila el proyecto">
	<echo>Compilando Proyecto: ..................... </echo>
    <javac srcdir="src" destdir="src_gen" classpathref="classpath" />
</target>

<target name="zip" depends="make" description="Crea el jar">
	<echo>Creando Jars: ..................... </echo>
    <jar jarfile="jars/test.jar" basedir="src_gen" />
</target>

<target name="test">
	<echo>JUnit Test: ..................... </echo>
	<junit fork="yes" haltonfailure="no">
		<test name="HelloWorldTest" />
		<formatter type="plain" usefile="false" />
		<classpath refid="classpathTest" />
	</junit>
</target>

<target name="test-xml" depends="zip">

	<echo>JUnit Test xml: ..................... </echo>
	<junit fork="yes" printsummary="yes" haltonfailure="no">
		
		<batchtest fork="yes" todir="report" >
			<fileset dir="src_gen">	
				<include name="*Test.class" />
			</fileset>
		</batchtest>
		
		<formatter type="xml" />
		
		<classpath refid="classpathTest" />
	</junit>
	
</target>
	
<target name="test-html">

	<echo>JUnit Test html: ..................... </echo>
	<junitreport todir="html">
		
		<fileset dir="report">
			<include name="TEST-*.xml"/>
		</fileset>
		
		<report format="frames" styledir="junitreport" todir="html"/>
	</junitreport>
	
	<copy file="junitreport/top_img.gif" tofile="html/top_img.gif"/>

	
</target>



<!--/////////////////////////////////-->


</project>

